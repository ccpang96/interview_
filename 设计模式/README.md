### 一、单例模式
#### 1.1 局部静态变量式
因为局部静态变量只会被初始化一次，而且在c++11后是线程安全的，所以这是一种最简单的方法。

#### 1.2懒汉式-双重检测+线程安全
系统运行中，实例并不存在，只有当需要使用该实例时，才会去创建并使用实例。这种方式要考虑线程安全。

#### 1.3饿汉式
饿汉式：指系统一运行，就初始化创建实例，当需要时，直接调用即可。（本身就线程安全，没有多线程的问题）

### 二、 观察者模式
建立一种对象与对象之间的依赖关系，一个对象发生改变时将自动通知其他对象，其他对象将相应做出反应。在此，发生改变的对象称为观察目标，而被通知的对象称为观察者，一个观察目标可以对应多个观察者，而且这些观察者之间没有相互联系，可以根据需要增加和删除观察者，使得系统更易于扩展，这就是观察者模式的模式动机。


观察者模式(Observer Pattern)：定义对象间的一种一对多依赖关系，使得每当一个对象状态发生改变时，其相关依赖对象皆得到通知并被自动更新。观察者模式又叫做发布-订阅（Publish/Subscribe）模式、模型-视图（Model/View）模式、源-监听器（Source/Listener）模式或从属者（Dependents）模式。



#### 2.1 模式结构
- Subject: 目标
- ConcreteSubject: 具体目标
- Observer: 观察者
- ConcreteObserver: 具体观察者

> 模式图
![](https://img2020.cnblogs.com/blog/1755696/202005/1755696-20200527102150181-2021994371.png)


> 时序图
![](https://img2020.cnblogs.com/blog/1755696/202005/1755696-20200527102338990-924493856.png)

#### 2.2 代码
![](https://img2020.cnblogs.com/blog/1755696/202005/1755696-20200527143925411-30126464.png)





#### 2.3 总结
观察者描述了如何建立对象与对象之间的依赖关系，一个目标可以有任意多个观察者，一旦目标状态发生改变，所有的观察者都会得到通知。