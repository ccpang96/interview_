# os_problem

## 哲学家就餐问题
如下图所示：

![](https://img2020.cnblogs.com/blog/1755696/202005/1755696-20200517055314485-706228502.png)


指导原则：要么不拿叉子，要么就拿两把叉子 </br>
临界区：判断左右邻居是否在吃饭，哲学家的状态成了临界资源 </br>
使用一个互斥信号量用于保护哲学家的状态，用一个同步信号量组用于同步其他线程</br>


- 必须有数据结构，来描述每个哲学家的状态
- 该状态是一个临界资源，各个哲学家对它的访问应该是互斥的进行――进程互斥
- 一个哲学家吃饱后，可能要唤醒它的左邻右舍，两者之间存在同步关系――进程同步


思路如下：
![](https://img2020.cnblogs.com/blog/1755696/202005/1755696-20200517061041980-1905108916.png)

代码见：[哲学家就餐问题](https://github.com/ccpang96/os_problem/blob/master/os_problem/%E5%93%B2%E5%AD%A6%E5%AE%B6%E5%B0%B1%E9%A4%90%E9%97%AE%E9%A2%98/philosopher.c)

运行环境：
ubuntu 18.04 

运行结果如下：
```
第4个哲学家，开始第1次思考
第3个哲学家，开始第1次思考
第2个哲学家，开始第1次思考
第1个哲学家，开始第1次思考
第0个哲学家，开始第1次思考
第4个哲学家，开始第1次吃饭
第2个哲学家，开始第1次吃饭
第4个哲学家，开始第2次思考
第2个哲学家，开始第2次思考
第0个哲学家，开始第1次吃饭
第3个哲学家，开始第1次吃饭
第0个哲学家，开始第2次思考
第3个哲学家，开始第2次思考
第1个哲学家，开始第1次吃饭
第4个哲学家，开始第2次吃饭
第1个哲学家，开始第2次思考
第4个哲学家，开始第3次思考
第2个哲学家，开始第2次吃饭
第0个哲学家，开始第2次吃饭
第2个哲学家，开始第3次思考
第0个哲学家，开始第3次思考
第3个哲学家，开始第2次吃饭
第1个哲学家，开始第2次吃饭
第3个哲学家，开始第3次思考
第1个哲学家，开始第3次思考
第4个哲学家，开始第3次吃饭
第2个哲学家，开始第3次吃饭
第4个哲学家，开始第4次思考
第2个哲学家，开始第4次思考
第0个哲学家，开始第3次吃饭
第3个哲学家，开始第3次吃饭
第0个哲学家，开始第4次思考
第3个哲学家，开始第4次思考
第1个哲学家，开始第3次吃饭
第4个哲学家，开始第4次吃饭
第1个哲学家，开始第4次思考
第4个哲学家，开始第5次思考
第2个哲学家，开始第4次吃饭
第0个哲学家，开始第4次吃饭
第2个哲学家，开始第5次思考
第0个哲学家，开始第5次思考
第3个哲学家，开始第4次吃饭
第1个哲学家，开始第4次吃饭
第3个哲学家，开始第5次思考
第1个哲学家，开始第5次思考
第4个哲学家，开始第5次吃饭
第2个哲学家，开始第5次吃饭
第4个哲学家，开始第6次思考
第2个哲学家，开始第6次思考
第0个哲学家，开始第5次吃饭
第3个哲学家，开始第5次吃饭
第0个哲学家，开始第6次思考
第3个哲学家，开始第6次思考
第1个哲学家，开始第5次吃饭
第4个哲学家，开始第6次吃饭
第1个哲学家，开始第6次思考
第4个哲学家，开始第7次思考
第2个哲学家，开始第6次吃饭
第0个哲学家，开始第6次吃饭
第2个哲学家，开始第7次思考
第0个哲学家，开始第7次思考
第3个哲学家，开始第6次吃饭
第1个哲学家，开始第6次吃饭
第3个哲学家，开始第7次思考
第1个哲学家，开始第7次思考
第4个哲学家，开始第7次吃饭
第2个哲学家，开始第7次吃饭
第4个哲学家，开始第8次思考
第2个哲学家，开始第8次思考
第0个哲学家，开始第7次吃饭
第3个哲学家，开始第7次吃饭
第0个哲学家，开始第8次思考
第3个哲学家，开始第8次思考
第1个哲学家，开始第7次吃饭
第4个哲学家，开始第8次吃饭
第1个哲学家，开始第8次思考
第4个哲学家，开始第9次思考
第2个哲学家，开始第8次吃饭
第0个哲学家，开始第8次吃饭
第2个哲学家，开始第9次思考
第0个哲学家，开始第9次思考
第3个哲学家，开始第8次吃饭
第1个哲学家，开始第8次吃饭
第3个哲学家，开始第9次思考
第1个哲学家，开始第9次思考
第4个哲学家，开始第9次吃饭
第2个哲学家，开始第9次吃饭
第4个哲学家，开始第10次思考
第2个哲学家，开始第10次思考
第0个哲学家，开始第9次吃饭
第3个哲学家，开始第9次吃饭
```

